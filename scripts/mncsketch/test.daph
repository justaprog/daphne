/*
 * Copyright 2021 The DAPHNE Consortium
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 
// run bin/daphne --explain property_inference scripts/mncsketch/test.daph
# Creating two random 2x3 matrix
m1 = rand(50, 20 , 1.0, 10.0, 0.1, -1);
m2 = rand(20, 30, 1.0, 10.0, 0.1, -1);
m3 = rand(30, 10, 1.0, 10.0, 0.1, -1);
m4 = rand(10, 20, 1.0, 10.0, 0.1, -1);

m5 = m1@m2;
m6 = m3@m4;
m7 = m5@m6;


print("Sparsity m5:");
print(sparsity(m5));
print(as.f64(sum(m5 != 0)) / (nrow(m5) * ncol(m5)));

print("Sparsity m6:");
print(sparsity(m6));
print(as.f64(sum(m6 != 0)) / (nrow(m6) * ncol(m6)));

print("Sparsity m7:");
print(sparsity(m7));
print(as.f64(sum(m7 != 0)) / (nrow(m7) * ncol(m7)));

print("Hello world!");
print("Bye!"); 

